


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        /* @import url('/Lato-Regular.ttf'); */
        @import url('https://fonts.googleapis.com/css2?family=Lato&family=Montserrat&family=Raleway&display=swap');

        body{
            margin: 0;
            padding: 0;
            color: #fff;
            font-family: 'Montserrat';
        }
        .landing {
            height: 100vh;
            display: flex;
            flex-direction:column;
        }
        .navbar {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            /* height: 2vh; */
            background-color: #000;
            padding: 2vh 0;
        
        }
        .nav-items{
            display: flex;
            flex-direction: row;
            
            /* justify-content: center; */
            
        }
        .nav {
            
            margin-right: 2vw;
            padding: 2vh 1vw;
            font-size:20px;
            
        }
        .map{
            height: 100%;
            width:100%;
            position: absolute !important;
            /* z-index: -1; */
            top: 0;
        }
        .map-container{
            flex-grow: 1;
            position: relative;
            
        }
        
        .form{
                    
            z-index: 100;
            width: 25vw;
            height: 90%;
            margin-left: 3%;
            background-color:#000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-sizing: border-box;
            border-radius: 12px;  
        }
        .sched-font{
            font-size:4rem;
        }
        input {
            margin-top: 2vh;
            width: 100%;
            box-sizing: border-box;
            height: 5vh;
            background-color: #f1f1f1;
            outline:none;
            border: 1px solid #333;
            border-radius: 2px;

         }
         .button {
             width: 90%;
             text-align: center;
            opacity: 1;
             margin-top: 4vh;
             background-color: #000;
             color: #fff;
             padding: 1.5vh 0;
             border: 1px solid #fff;
         }
         .formJr{
             display: flex;
             flex-direction: column;
             justify-content: center;
             align-items: center;
         }
         .input{
             width: 90%;
         }
         label {
            
             width: 90%;
             display: block;
             margin: auto;
             margin-top: 1vh;
         }
         .logo{
             height: 100%;
             width: 10%;
             margin-left: 2vw;
             background-image: url('/assets/cover.jpg');
             background-size: contain;
             background-repeat: no-repeat;
             /* background-color: #fff; */
         }
         
    </style>
    <script src='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css' rel='stylesheet' />

</head>
<body>
    <div class="landing">
        <div class="navbar">
            <div class="logo"></div>
            <div class="nav-items">
                <div class="nav nav1">Home</div>
                <div class="nav nav2">Settings</div>
               
            </div>
        </div>
        <div class="map-container">
            <div class="map" id='map'></div>
            <div style='width:100%;height:100%;display:flex;flex-direction: row;align-items: center; box-sizing: border-box;'>
                <div class="form">
                    <div class="sched-font">Ticket</div>
                    <div style="margin-top:4vh;width: 100%;">
                        <form action="/" method="get">
                            <div class='formJr'>
                                <div style="width:100%"><label for="from">From</label></div>
                                <div class="input"><input type="text" name="from" id="from"></div>
                                <div style="width:100%"><label for="to">To</label></div>
                                <div class="input"><input type="text" name="to" id="to"></div>
                                <div class="button">Post</div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
            mapboxgl.accessToken = 'pk.eyJ1Ijoic2Fobmluc2giLCJhIjoiY2s4ODJlOXM0MDNweDNvbXEzZW92eGdwOSJ9.OQi8qRzqCtnMnETnRpBo0g';
            
            let button = document.querySelector('.button');
            function mapRefresh(lat,long){
                console.log(lat,long)
                let map = new mapboxgl.Map({
                    container: 'map',
                    style: 'mapbox://styles/mapbox/streets-v11',
                    center: [lat, long],
                    zoom:4
                });
                map.addControl(new mapboxgl.AttributionControl(), 'top-left');
            }

            mapRefresh(74.5,40)
            button.addEventListener('click',buttonClick);
            function buttonClick(){
                fetch('/api',{
                    method: 'POST', 
                    body: '{"latitude" : "169"}',
                    headers: {
                            "Content-Type": "application/json"
                        }
                    })
                    .then(function(resp){
                        return resp.json()
                    })
                    .then(function(resp){

                        mapRefresh(parseInt(resp.arr[1]),parseInt(resp.arr[0]))
                    })
            }
    </script>
</body>
</html>